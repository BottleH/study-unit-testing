## 3. 단위 테스트 구조
 ### 3.1 단위 테스트를 구성하는 방법

1. AAA 패턴( = 준비, 실행, 검증 패턴 = 3A 패턴)을 사용해 단위 테스트를 구성하는 방법
> AAA 패턴 (=3A 패턴, 준비/ 실행/ 검증 패턴)</br>
> -테스트 스위트 내 모든 테스트가 단순하고 균일한 구조를 갖는데 도움이 된다.
> 
<AAA 패턴의 구조>
-준비 구절 : SUT와 해당 의존성을 원하는 상태로 준비
-실행 구절 : SUT에서 메서드를 호출하고 준비된 의존성을 전달
-검증 구절 : 결과를 검증 
</br> 

2. 단위 테스트에서 피해야 할 함정
- 여러개의 준비, 실행, 검증 구절 피하기
	- 검증 구절로 구분된 여러 개의 실행 구절을 보면, 여러 개의 동작단위를 검증하는 테스트를 뜻한다. 
	-> 단위테스트가 아닌 통합 테스트의 영역
- 단위 테스트 내 if 문 피하기
	- if문은 테스트가 한번에 너무 많은 것을 검증한다는 표시
	-> 여러개의 테스트로 나눠야 함
	- 여러 AAA구절과 달리 통합테스트에서도 if문으로 얻는 이점 없음
- 실행 구절이 한 줄 이상인 경우 피하기
	- 실행 구절이 두 줄 이상인 경우 SUT의 공개 API에 문제가 있을 수 있다.
	- 테스트 대상 API의 캡슐화가 보장 되지 않을 수 있다. ( = 잠재적 불변위반 모순이 존재 할 가능 성이 있다.)
</br>
- 검증 구절이 너무 커지는 것을 피하기
	- 검증 구절이 너무 커지는 것은 제품의 코드에서 추상화가 누락됬을 가능성을 나타낸다.
	 -> SUT에서 반환된 객체 내에서 모든 속성을 검증하는 대신 객체 클래스 내에 적절한 equality member를 정의 하는 것이 좋다.</br>
	 -> 단일 검증문으로 객체를 기대값과 비교할 수 있다.

3. 단위 테스트를 가능한 읽기 쉽게 만드는 방법
* 준비, 실행, 검증 주석을 구분하거나 주석을 달아 구분가능하도록 표기 한다.
* 테스트 픽스처 재사용
	> 테스트 픽스처</br>
	> -테스트 실행 대상 객체
	> -정규 의존성, 즉 SUT로 전달되는 인수
	> -테스트 실행 전에 알려진 고정 상태로 유지하기 때문에 동일 결과 생성
	* 테스트 픽스처 재사용의 단점
		* 테스트간 결합도 상승
		* 테스트 가독성 하락
	* 더 나은 테스트 픽스처 재사용법
		* 생성자 사용 -> 비공개 팩토리 메서드 사용
* 단위 테스트 명명법
	* 테스트에 표현력이 있는 이름을 붙이는것은 중요
	-> 테스트가 검증하는 내용가 기본 시스템의 동작을 이해하는 데 도움이 됨
	> 테스트 명명 지침</br>
	> 엄격한 명명 정책을 따르지 않는다. ( 표현의 자유 허용)
	> 도메인에 익숙한 비개발자들에게 시나리오를 설명하는 것처럼 명명 한다.
	> 단어를 밑줄 표시로 구분한다. 
* 매개변수화 된 테스트 리팩터링하기
* 검증문 라이브러리를 사용한 테스트 가독성 향상
