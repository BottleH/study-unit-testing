# [Unit Testing] 1장 단위 테스트의 목표

이 내용은 [단위 테스트 생산성과 품질을 위한 단위 테스트 원칙과 패턴]을 읽으면서 정리한 내용을 포함하고 있습니다.

## 단위테스트 현황
- 단위테스트를 적용해야하는지는 더이상 논쟁거리가 아니고 기업용 애플리케이션은 모두 단위 테스트가 적용되어있다.
- 위의 논쟁에서 -> 좋은 단위테스트를 작성하는것은 어떤의미인가? 
- 많은 테스트가 있지만 개발자들이 원하는 결과를 얻지못할수있다.

## 단위테스트의 목표
- 더좋은 설계가 단위테스트의 목표가 아니다(더나은 설계는 단지 더좋은 사이드 이펙트)
- 강결합시에 저품질이 나타나지만 코드조각을 단위테스트 한다해도 좋은지표는 아니다.
- 지속가능한 성장
  - 테스트가 없는 프로젝트는 개발속도가 시간이 지나면 개발속도가 현저히 느려진다.(소프트웨어 엔트로피)
    - 이것은 품질을 떨어뜨리는 코드형태로 도출
  - 테스트는 안정망 역할을 하여 리팩토링 혹은 새로운 기능 도입후 기능확인 도움이 된다.
    - 단점은 테스트코드를 짜는 노력 시간이 든다.
    - 하지만 코드를 지속가능하고 장기적으로 개발속도를 유지할수있게 해준다.

## 좋은 테스트와 좋지 않은 테스트를 가르는 요인
- 모든 단위테스트를 작성할 필요는 없다. 도움이 되는지 여부를 명확히 하고 단위테스트를 짜야한다.
- 코드 리팩토링시 테스트도 리팩토링 변경시 테스트를 실행하여야한다.
- 테스트가 잘못된 경고를 발생시킨경우 처리하라
- 기반코드가 어떻게 동작하는지 이해할때는 단위테스트를 읽는데 시간을 투자하여야한다.

## 테스트 스위트 품질 측정을 위한 커버리지 지표
- 커버리지지표는 괜찮은 부정지표이지만 좋지않은 긍정지표이다.
- 너무 적을떄는 테스트가 충분치 않은것 100%커버리지라고 반드시 양질의 테스트는 아니다.
- 코드 커버리지 지표
  - 라인수만 처리하기 때문에 코드를 더작게 해도 테스트 스위트의 가치나 기반 코드 베이스의 유지보수성이 변경되지않는다.
- 분기 커버리지 지표
  - 원시코드 라인수 대신 제어구조에 중점
  - 분기개수만 다루어 얼만큼의 코드가 필요한지 고려하지않는다.
- 문제점
  - 가능한 모든결과를 검증한다고 보증할수 없음
  - 외부 라이브러리의 코드 경로를 고려할수 없음
- 특정 커버리지 숫자를 목표로
  - 좋은 부정 지표이지만 나쁜 긍정지표정도로만 생각하자

## 무엇이 성공적인 테스트 스위트를 만드는가?
- 성공적인 테스트 스위트
  - 개발주기에 통합
  - 코드베이스에서 핵심만 대상
    - 인프라코드
      - 테스트를 많이하는것이 좋지만 도메인 모델에 관심을 더많이 갖는것이 옳다.
    - 모든것을 하나로 묶는 코드
      - 시스템이 전체적으로 어떻게 동작하는지 확인 가능하지만 초점은 도메인 모델이 중요
  - 최소한의 유지비로 최대의 가치를 끌어낸다.
    - 이책에서 말하는 핵심 
    - 가치있는 테스트 식별하기 , 작성하기
    - 코드설계 기술을 알아야 가치있는테스트를 작성할수 있다.
