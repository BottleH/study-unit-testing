## 8.5 통합 테스트 모범 사례 

- 목적 : 좋은 테스트를 작성할 수 있도록 좋은 코드베이스를 작성   
  - 단위/통합 테스트의 구분이 명확하고
  - 리팩토링 내성과 회귀방지 유리


### 8.5.1 도메인 모델 경계 명시하기 

- 항상 도메인 모델을 코드베이스에서 명시적이고 잘 알려진 위치에 두기 -> 테스트에 도움이 됨 : 단위/통합 테스트 구분이 명확해짐   
  - 도메인 모델 : 프로젝트가 해결하고자 하는 문제에 대한 도메인 지식의 모음


### 8.5.2 계층 수 줄이기 

- 추상화/간접계층이 많은 코드베이스는 컨트롤러와 도메인 모델 사이에 명확한 경계가 없어짐 
- 가능한 적은 간접 계층을 유지해서 리팩토링 내성과 회귀방지를 높여야 함 
- 주요 계층 : 도메인 모델, 애플리케이션 서비스 계층(컨트롤러), 인프라 계층


### 8.5.3 순환 의존성 제거하기 

- 순환 의존성은 테스트를 방해하고, 코드를 읽고 이해하기 어렵게 만듬 
- 서로 의존적인 클래스의 그래프를 가능한 작게 만들어 손상을 최소화 해야 함 


### 8.5.4 테스트에서 다중 실행 구절 사용 

- 테스트에서 준비/실행/검증 구절이 2개 이상이 되면 테스트가 초점을 잃고 순식간에 커질 위험이 있다(코드 악취)
  - -> 각 실행을 고유의 테스트로 추출해 테스트를 나누어 테스트를 더 쉽게 이해하고 필요할 때 수정할 수 있도록 해야 함 
- 다단계 테스트는 E2E 테스트 범주임 


--- 

## 8.6 로깅 기능을 테스트하는 방법

### 8.6.1 로깅을 테스트해야 하는가?

- 테스트를 보는 사람이 누구냐에 따라 다르다
  - 고객 or 애플리케이션의 클라이언트 or 개발자 이외의 다른 사람 : 로깅은 식별할 수 있는 동작이므로 테스트가 필요
  - 개발자 : 필요X

- 지원 로깅 : 지원 담당자나 시스템 관리자가 추적할 수 있는 메세지를 생성
- 진단 로깅 : 개발자가 어플리케이션 내부 상황을 파악할 수 있도록 도움 


---

## 8.7 결론 
- 식별할 수 있는 동작인지, 아니면 구현 세부 사항인지 여부에 대한 관점으로 프로세스 외부 의존성과의 통신을 살펴봐야 함 
- 좋은 테스트 코드를 작성하기 위해선 잘 된 코드베이스가 필요하다.