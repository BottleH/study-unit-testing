# 9. Mock 처리에 대한 모범 사례 

## 9.1 목의 가치를 극대화 하기 

### 9.1.1 시스템 끝에서 상호 작용 검증하기 
> Mock 을 사용할 때는 항상 시스템 끝에서 비관리 의존성과의 상호작용을 검증해야함을 기억하자! 

- 시스템 끝에서 Mock 을 사용하여 비관리 의존성의 상호작용을 검증하여 회귀방지와 리팩토링 내성을 향상 

### 9.1.2 Mock 을 Spy 로 대체하기
- 스파이 : 직접 작성한 Mock 
- 스파이를 검증 단계에서 코드를 재사용해 테스트 크기를 줄이고 가독성을 향상

- 테스트 = 감시자 
  - 모든 것을 의심하고 재확인


## 9.2 Mock 처리에 대한 모범 사례 

### 9.2.1 Mock 은 통합 테스트만을 위한 것 
- Mock 은 비관리 의존성을 검증할 때만 사용해야 하기 때문에 이런 의존성을 처리하는 역할을 하는 Controller 를 통합테스트 할 때만 적용해야 한다

### 9.2.2 테스트 당 Mock 이 하나일 필요는 없음 
- Mock 의 수 = 운영에 참여하는 비관리 의존성의 수 

### 9.2.3 호출 횟수 검증하기 
- Mockito 의 `verify()` 함수를 활용하여 "예상하는 호출의 유무, 호출 횟수 등" 을 검증

### 9.2.4 보유 타입만 Mock 으로 처리하기 
- 서드파티 라이브러리 위에 항상 어댑터를 작성하고 기본 타입 대신 해당 어댑터를 Mock 으로 처리해야 한다.